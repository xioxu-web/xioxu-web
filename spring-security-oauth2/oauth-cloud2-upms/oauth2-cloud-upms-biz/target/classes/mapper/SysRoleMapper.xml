<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="io.microservice.oauth2.cloud.admin.biz.mapper.SysRoleMapper">
    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="io.microservice.oauth2.cloud.admin.api.entity.SysRole"> </resultMap>

    <!-- 通过用户ID，查询角色信息-->
    <select id="listRolesByUserId" resultMap="BaseResultMap">
        SELECT
        r.role_id,
        r.role_name,
        r.role_code,
        r.role_desc,
        r.create_time,
        r.update_time,
        r.update_by,
        r.create_by
       FROM sys_role r,
       sys_user_role ur
      WHERE r.role_id=ur.role_id
      AND del_falg='0'
      and user_id=${user_id};
    </select>

</mapper>
